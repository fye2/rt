<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>w_<</title>
  <link rel="stylesheet" href="css/main.css" />
  <link rel="icon" href="images/ss.png" type="image/png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.2/vanilla-tilt.min.js"></script>

  <style>
    /* Estilo para status sobre avatar pequeno */
    .avatar-wrapper {
      position: relative;
      width: 65px;
      height: 65px;
    }
    .status-img {
      position: absolute;
      bottom: 0;
      right: 0;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      border: 3px solid #1e1f22; /* borda para destacar sobre o avatar */
      background-color: transparent;
    }
  </style>
</head>
<body>
  <audio loop preload="auto" id="audio">
    <source src="media/neww.mp3" type="audio/mpeg" />
  </audio>

  <input type="checkbox" autocomplete="off" id="overlay-toggle" />
  <div class="overlay fullscreen">
    <label for="overlay-toggle" onclick="audioPlay();">
      <span class="overlay-text">trust the process</span>
    </label>
  </div>

  <video autoplay loop muted>
    <source src="media/neww.mp4" type="video/mp4" />
    Seu navegador não suporta vídeo.
  </video>

  <div class="all">
    <div
      class="discord-profile"
      data-tilt
      data-tilt-max="8"
      data-tilt-glare="true"
      data-tilt-max-glare="0.3"
    >
      <!-- Avatar maior -->
      <img id="discord-avatar" class="profile-img" src="" alt="Avatar do Discord" />

      <!-- Nome grande -->
      <div id="discord-name" class="nickr">Carregando...</div>

      <!-- Badges fixos -->
      <div class="badges">
        <div class="badge" style="background-image: url('images/1895-subscriber-nitro-animated.gif');" data-tooltip="Assinante desde 19 de fev. de 2025"></div>
        <div class="badge" style="background-image: url('images/booster.png');" data-tooltip="Impulsionando o servidor desde 26 de jul. de 2024"></div>
      </div>

      <div class="bio">sc</div>

      <div class="social-buttons">
        <a href="https://www.youtube.com/@raelfvm/videos" target="_blank" class="social-button"><i class="fab fa-youtube"></i></a>
        <a href="https://www.tiktok.com/@_rtffz" target="_blank" class="social-button"><i class="fab fa-tiktok"></i></a>
      </div>

      <!-- Segundo cartão com avatar pequeno e status sobreposto -->
      <div class="discord-profile-small">
        <div class="avatar-wrapper">
          <img id="discord-avatar-small" src="" alt="Avatar Pequeno" class="profile-img-small" />
          <img id="status-img" class="status-img" src="images/status/offline.svg" alt="Status" />
        </div>
        <span id="discord-name-small" class="profile-name">Carregando...</span>
        <a href="https://discord.com/users/499315885245464617" target="_blank" class="profile-btn">Profile</a>
      </div>

      <!-- Texto status oculto (se quiser deixar visível, remova `display: none`) -->
      <div id="discord-status" class="status" style="display: none;">Status: carregando...</div>
    </div>
  </div>

  <script>
    function audioPlay() {
      const audio = document.getElementById("audio");
      audio.volume = 0.5;
      audio.currentTime = 0;
      audio.play();
    }

    VanillaTilt.init(document.querySelectorAll(".discord-profile"), {
      max: 10,
      speed: 400,
      glare: true,
      "max-glare": 0.3,
    });

    async function carregarPerfil(userId) {
      try {
        const res = await fetch("https://testeee-rtqe.onrender.com/api/user/" + userId);
        const data = await res.json();

        if (data.error) {
          document.getElementById("discord-name").textContent = "Erro ao carregar";
          return;
        }

        document.getElementById("discord-avatar").src = data.avatarURL;
        document.getElementById("discord-avatar-small").src = data.avatarURL;
        document.getElementById("discord-name").textContent = data.displayName || data.username;
        document.getElementById("discord-name-small").textContent = data.displayName || data.username;

        const status = data.status || "offline";
        const statusImgEl = document.getElementById("status-img");

        switch (status) {
          case "online":
            statusImgEl.src = "images/status/online.svg";
            statusImgEl.alt = "Online";
            break;
          case "idle":
            statusImgEl.src = "images/status/idle.svg";
            statusImgEl.alt = "Ausente";
            break;
          case "dnd":
            statusImgEl.src = "images/status/dnd.svg";
            statusImgEl.alt = "Não Perturbe";
            break;
          default:
            statusImgEl.src = "images/status/offline.svg";
            statusImgEl.alt = "Offline";
            break;
        }
      } catch (error) {
        console.error("Erro ao buscar dados do usuário:", error);
      }
    }

    carregarPerfil("499315885245464617");
  </script>
</body>
</html>
