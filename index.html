<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>w_<</title>
  <link rel="stylesheet" href="css/main.css" />
  <link rel="icon" href="images/ss.png" type="image/png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.2/vanilla-tilt.min.js"></script>

  <style>
    /* Avatar com status (wrapper) */
    .avatar-wrapper {
      position: relative;
      width: 65px;
      height: 65px;
    }
    .profile-img-small {
      width: 65px;
      height: 65px;
      border-radius: 50%;
      display: block;
    }
    /* Status SVG container */
    .status-indicator {
      position: absolute;
      bottom: 0;
      right: 0;
      width: 20px; /* tamanho oficial */
      height: 20px;
      border: 3.5px solid #1e1f22; /* mesma cor do fundo para “embutir” */
      border-radius: 50%;
      background: transparent;
      pointer-events: none;
    }
    /* Cores para cada status (para fallback, mas SVGs já tem cor) */
    .status-online svg circle,
    .status-online svg path {
      fill: #43b581 !important;
    }
    .status-idle svg circle,
    .status-idle svg path {
      fill: #faa61a !important;
    }
    .status-dnd svg circle,
    .status-dnd svg path {
      fill: #f04747 !important;
    }
    .status-offline svg circle,
    .status-offline svg path {
      fill: #747f8d !important;
    }
  </style>
</head>
<body>
  <audio loop preload="auto" id="audio">
    <source src="media/neww.mp3" type="audio/mpeg" />
  </audio>

  <input type="checkbox" autocomplete="off" id="overlay-toggle" />
  <div class="overlay fullscreen">
    <label for="overlay-toggle" onclick="audioPlay();">
      <span class="overlay-text">trust the process</span>
    </label>
  </div>

  <video autoplay loop muted>
    <source src="media/neww.mp4" type="video/mp4" />
    Seu navegador não suporta vídeo.
  </video>

  <div class="all">
    <div
      class="discord-profile"
      data-tilt
      data-tilt-max="8"
      data-tilt-glare="true"
      data-tilt-max-glare="0.3"
    >
      <!-- FOTO DE PERFIL -->
      <img id="discord-avatar" class="profile-img" src="" alt="Avatar do Discord" />

      <!-- NOME -->
      <div id="discord-name" class="nickr">Carregando...</div>

      <!-- BADGES -->
      <div class="badges">
        <div class="badge" style="background-image: url('images/1895-subscriber-nitro-animated.gif');" data-tooltip="Assinante desde 19 de fev. de 2025"></div>
        <div class="badge" style="background-image: url('images/booster.png');" data-tooltip="Impulsionando o servidor desde 26 de jul. de 2024"></div>
      </div>

      <!-- BIO -->
      <div class="bio">sc</div>

      <!-- SOCIAL -->
      <div class="social-buttons">
        <a href="https://www.youtube.com/@raelfvm/videos" target="_blank" class="social-button"><i class="fab fa-youtube"></i></a>
        <a href="https://www.tiktok.com/@_rtffz" target="_blank" class="social-button"><i class="fab fa-tiktok"></i></a>
      </div>

      <!-- SEGUNDO CARD (COM STATUS NO AVATAR) -->
      <div class="discord-profile-small">
        <div class="avatar-wrapper">
          <img id="discord-avatar-small" src="" alt="Avatar Pequeno" class="profile-img-small" />
          <div id="status-indicator" class="status-indicator status-offline" title="Offline">
            <!-- SVG Status (padrão offline) -->
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" >
              <circle cx="10" cy="10" r="10" fill="#747F8D"/>
            </svg>
          </div>
        </div>
        <span id="discord-name-small" class="profile-name">Carregando...</span>
        <a href="https://discord.com/users/499315885245464617" target="_blank" class="profile-btn">Profile</a>
      </div>

      <!-- Texto de status (oculto ou opcional) -->
      <div id="discord-status" class="status" style="display: none;">Status: carregando...</div>
    </div>
  </div>

  <script>
    function audioPlay() {
      const audio = document.getElementById("audio");
      audio.volume = 0.5;
      audio.currentTime = 0;
      audio.play();
    }

    VanillaTilt.init(document.querySelectorAll(".discord-profile"), {
      max: 10,
      speed: 400,
      glare: true,
      "max-glare": 0.3,
    });

    // SVGs para cada status
    const statusSVGs = {
      online: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="10" cy="10" r="10" fill="#43B581"/>
      </svg>`,
      idle: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill="#FAA61A" d="M10 0a10 10 0 1 0 0 20V0z"/>
      </svg>`,
      dnd: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="10" cy="10" r="10" fill="#F04747"/>
        <rect x="5" y="9" width="10" height="2" fill="#FFF"/>
      </svg>`,
      offline: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="10" cy="10" r="10" fill="#747F8D"/>
      </svg>`
    };

    async function carregarPerfil(userId) {
      try {
        const res = await fetch("https://testeee-rtqe.onrender.com/api/user/" + userId);
        const data = await res.json();

        if (data.error) {
          document.getElementById("discord-name").textContent = "Erro ao carregar";
          return;
        }

        document.getElementById("discord-avatar").src = data.avatarURL;
        document.getElementById("discord-avatar-small").src = data.avatarURL;
        document.getElementById("discord-name").textContent = data.displayName || data.username;
        document.getElementById("discord-name-small").textContent = data.displayName || data.username;

        const status = data.status || "offline";
        const statusEl = document.getElementById("status-indicator");

        // Atualiza classe (para fallback)
        statusEl.className = "status-indicator status-" + status;

        // Atualiza SVG do status
        statusEl.innerHTML = statusSVGs[status] || statusSVGs.offline;
        statusEl.title = status.charAt(0).toUpperCase() + status.slice(1);
      } catch (error) {
        console.error("Erro ao buscar dados do usuário:", error);
      }
    }

    carregarPerfil("499315885245464617");
  </script>
</body>
</html>
